<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>DXF Tiles + 地理院地図</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <style>
    html, body, #map {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
/* ========= 実在するタイル番号（あなたが確認したもの） ========= */
const z = 20;
const x = 923800;
const y = 413818;

/* ========= XYZ → 緯度経度（タイル中心） ========= */
function tile2lat(y, z) {
  const n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);
  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));
}
function tile2lon(x, z) {
  return x / Math.pow(2, z) * 360 - 180;
}
const lat = tile2lat(y + 0.5, z);
const lon = tile2lon(x + 0.5, z);

/* ========= 地図本体 ========= */
const map = L.map('map', {
  minZoom: 14,
  maxZoom: 22
}).setView([lat, lon], z);

/* ========= 背景：地理院地図（標準地図） ========= */
L.tileLayer(
  'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
  {
    attribution: '地理院地図',
    maxZoom: 20
  }
).addTo(map);

/* ========= あなたの DXF タイル ========= */
L.tileLayer(
  './tiles/{z}/{x}/{y}.png',
  {
    minZoom: 14,
    maxZoom: 22,
    opacity: 1.0
  }
).addTo(map);
</script>
</body>
</html>
